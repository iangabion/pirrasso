<?php

namespace App;

use Illuminate\Database\Eloquent\Model;
use Laravel\Passport\HasApiTokens;
use Illuminate\Notifications\Notifiable;
use Illuminate\Foundation\Auth\User as Authenticatable;

class Client extends Authenticatable
{
     use HasApiTokens, Notifiable;



    // scopes
    public function scopeNameSearch($query , $searchTerm)
    {
        return $query->where('first_name', 'like', "%" . $searchTerm . "%");
    }


    // relations
    public function items(){
        return $this->hasMany(Items::class);
    }
    public function session(){
        return $this->hasMany(Session::class);
    }
    public function solds(){
        return $this->hasMany(Sold::class);
    }
    public function messages(){
        return $this->hasMany(Message::class);
    }

    public function items_fav(){
        return $this->belongsToMany(Items::class , 'favorites' , 'user_id' , 'item_id' );
    }
    
    public function social_profile(){
        return $this->hasOne(SocialProfile::class);
    }



    // mutator
    public function getImageAttribute($value){
        if(!$this->social_profile()->count()){
            return $value ? asset('images/user_profile/'. $value) : 'data:image/jpeg;base64,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' ;
        }
    }
    public function getFullnameAttribute($value){
        return ucwords($this->first_name .' '. $this->last_name) ;
    }



}
